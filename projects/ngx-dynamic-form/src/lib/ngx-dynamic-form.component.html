<form #ngForm="ngForm" [formGroup]="dynamicFormGroup" class="needs-validation" (ngSubmit)="submit()" *ngIf="(form$ | async) as form">
    
    <!-- Form Group Starts -->
    <div class="row">

        <div class="col-md-{{ field.column }}" *ngFor="let field of form.formGroup; let i = index">
            
            <div class="form-group" *ngIf="field.fieldType === 'input'">
                <label [for]="field.formControlName">{{ field.label }} <span *ngIf="field.required">*</span></label>
            
                <div class="input-group w-100">
                    
                    <!-- Prefix -->
                    <div class="input-group-prepend" *ngIf="field.prefix as prefix">
                        <span class="input-group-text"> {{ prefix }} </span>
                    </div>

                    <!-- Input Group -->
                    <input 
                        class="form-control" 
                        [placeholder]="field.placeholder" 
                        [formControlName]="field.formControlName" 
                        [type]="field.inputType"
                        [id]="field.formControlName"
                        [disabled]="field.disabled"
                        [required]="field.required"
                        [class]="field.customClass"
                        [maxLength]="field.maxLength"
                        (keyup)="onInputChange($event, field.formControlName, i)"
                    >

                    <!-- Suffix -->
                    <div class="input-group-append" *ngIf="field.suffix as suffix">
                        <span class="input-group-text"> {{ suffix }} </span>
                    </div>

                </div>

                <!-- Required Validation -->
                <small class="form-text error-field text-muted" *ngIf="hasError(field.formControlName, field.required ? 'required' : '') && ngForm.submitted ">
                    {{ field.requiredErrorMessage ? field.requiredErrorMessage : 'Please enter ' + field.label }}
                </small>

                <!-- Regex Validation -->
                <small class="form-text error-field text-muted" *ngIf="hasError(field.formControlName, field.validation.patternName)">
                    {{ field.validation.message }}
                </small>

                <!-- Hint -->
                <small class="form-text text-muted" *ngIf="field.hint as hint">{{ hint }}</small>

                <!-- Max Length -->
                <small class="form-text text-muted float-right" *ngIf="field.displayMaxLength">
                    {{ formDetails.formGroup[i].value ? formDetails.formGroup[i].value.length : 0 }} / {{ field.maxLength }}
                </small>
            </div>

        </div>

    </div>
    <!-- Form Group Ends -->

    <!-- Button -->
    <button type="submit" class="btn" [class]="form.style.buttonStyle.class">{{ form.style.buttonStyle.buttonName }}</button>
</form>

<pre  class="mt-5">
    <code>
        {{ (form$ | async) | json }}
    </code>
</pre>